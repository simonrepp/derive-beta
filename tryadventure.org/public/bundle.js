!function(e){var n={};function t(i){if(n[i])return n[i].exports;var s=n[i]={i:i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,t),s.l=!0,s.exports}t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=20)}([function(e,n){class t extends Error{constructor(e,n,t,i){super(`${e}\n\n${t}\n\n${n}`),this.cursor=i,this.selection=t,this.snippet=n,this.text=e}}e.exports={AdventureParseError:class extends t{constructor(...e){super(...e)}},AdventureValidationError:class extends t{constructor(...e){super(...e)}}}},function(e,n){e.exports=((e,n=[],t=[])=>{Array.isArray(n)||(n=[n]),Array.isArray(t)||(t=[t]);const i=e.messages.reporting.contentHeader,s=e.messages.reporting.gutterHeader.padStart(5),o=s.length+3,c=`  ${s} | ${i}\n`,r=`${" ".repeat(o-5)}...\n`;let a=c,l=!1;for(let i of e.instructions){const e=n.includes(i),s=t.includes(i);let c=!1;for(let e of[...n,...t])if(i.lineNumber>=e.lineNumber-2&&i.lineNumber<=e.lineNumber+2){c=!0;break}if(c){const n=i.lineNumber.toString();a+=e?` >${n.padStart(o-3)} | ${i.line}\n`:s?` *${n.padStart(o-3)} | ${i.line}\n`:`${n.padStart(o-1)} | ${i.line}\n`,l=!1}else l||(a+=r,l=!0)}return a})},function(e,n,t){var i=this;const{AdventureValidationError:s}=t(0),o=t(1);e.exports={exactCountNotMet:(e,n,t,i,c)=>{const r=e.messages.validation.exactCountNotMet(n,t.count,i);let a,l;throw t.length>0?(a=[[t[0].lineNumber,0],[t[0].lineNumber,0]],l=o(e,t)):(a=c.lineNumber<e.instructions.length?[[c.lineNumber+1,0],[c.lineNumber+1,0]]:[[c.lineNumber,c.line.length],[c.lineNumber,c.line.length]],l=o(e,c.subinstructions)),new s(r,l,a)},excessName:(e,n)=>{const t=e.messages.validation.excessName(n.name),i=o(e,[n,...n.subinstructions]),c=[[n.lineNumber,0]];if(n.subinstructions.length>0){const e=n.subinstructions[n.subinstructions.length-1];c.push([e.lineNumber,e.line.length])}else c.push([n.lineNumber,n.line.length]);throw new s(t,i,c)},expectedDictionaryGotDictionaries:(e,n,t)=>{const i=t[t.length-1],c=[];for(let e of t)c.push(...e.subinstructions);const r=e.messages.validation.expectedDictionaryGotDictionaries(n),a=o(e,[...t,...c]),l=[[t[0].lineNumber,0]];if(i.subinstructions.length>0){const e=i.subinstructions[i.subinstructions.length-1];l.push([e.lineNumber,e.line.length])}else l.push([i.lineNumber,i.line.length]);throw new s(r,a,l)},expectedDictionaryGotField:(e,n)=>{const t=e.messages.validation.expectedDictionaryGotField(n.name),i=o(e,[n,...n.subinstructions]),c=[[n.lineNumber,0]];if(n.subinstructions.length>0){const e=n.subinstructions[n.subinstructions.length-1];c.push([e.lineNumber,e.line.length])}else c.push([n.lineNumber,n.line.length]);throw new s(t,i,c)},expectedDictionaryGotList:(e,n)=>{const t=e.messages.validation.expectedDictionaryGotList(n.name),i=o(e,[n,...n.subinstructions]),c=[[n.lineNumber,0]];if(n.subinstructions.length>0){const e=n.subinstructions[n.subinstructions.length-1];c.push([e.lineNumber,e.line.length])}else c.push([n.lineNumber,n.line.length]);throw new s(t,i,c)},expectedDictionaryGotSection:(e,n)=>{const t=e.messages.validation.expectedDictionaryGotSection(n.name),i=o(e,[n,...n.subinstructions]),c=[[n.lineNumber,0]];if(n.subinstructions.length>0){const e=n.subinstructions[n.subinstructions.length-1];c.push([e.lineNumber,e.line.length])}else c.push([n.lineNumber,n.line.length]);throw new s(t,i,c)},expectedFieldGotDictionary:(e,n)=>{const t=e.messages.validation.expectedFieldGotDictionary(n.name),i=o(e,[n,...n.subinstructions]),c=[[n.lineNumber,0]];if(n.subinstructions.length>0){const e=n.subinstructions[n.subinstructions.length-1];c.push([e.lineNumber,e.line.length])}else c.push([n.lineNumber,n.line.length]);throw new s(t,i,c)},expectedFieldGotList:(e,n)=>{const t=e.messages.validation.expectedFieldGotList(n.name),i=o(e,[n,...n.subinstructions]),c=[[n.lineNumber,0]];if(n.subinstructions.length>0){const e=n.subinstructions[n.subinstructions.length-1];c.push([e.lineNumber,e.line.length])}else c.push([n.lineNumber,n.line.length]);throw new s(t,i,c)},expectedFieldGotMultipleFields:(e,n,t)=>{const i=t[t.length-1],c=[];for(let e of t)c.push(...e.subinstructions);const r=e.messages.validation.expectedFieldGotMultipleFields(n),a=o(e,[...t,...c]),l=[[instruction.lineNumber,0]];if(i.subinstructions.length>0){const e=i.subinstructions[i.subinstructions.length-1];l.push([e.lineNumber,e.line.length])}else l.push([i.lineNumber,i.line.length]);throw new s(r,a,l)},expectedFieldGotSection:(e,n)=>{const t=e.messages.validation.expectedFieldGotSection(n.name),i=o(e,[n,...n.subinstructions]),c=[[n.lineNumber,0]];if(n.subinstructions.length>0){const e=n.subinstructions[n.subinstructions.length-1];c.push([e.lineNumber,e.line.length])}else c.push([n.lineNumber,n.line.length]);throw new s(t,i,c)},expectedListGotDictionary:(e,n)=>{const t=e.messages.validation.expectedListGotDictionary(n.name),i=o(e,[n,...n.subinstructions]),c=[[n.lineNumber,0]];if(n.subinstructions.length>0){const e=n.subinstructions[n.subinstructions.length-1];c.push([e.lineNumber,e.line.length])}else c.push([n.lineNumber,n.line.length]);throw new s(t,i,c)},expectedListGotSection:(e,n)=>{const t=e.messages.validation.expectedListGotSection(n.name),i=o(e,[n,...n.subinstructions]),c=[[n.lineNumber,0]];if(n.subinstructions.length>0){const e=n.subinstructions[n.subinstructions.length-1];c.push([e.lineNumber,e.line.length])}else c.push([n.lineNumber,n.line.length]);throw new s(t,i,c)},expectedSectionGotDictionary:(e,n)=>{const t=e.messages.validation.expectedSectionGotDictionary(n.name),i=o(e,[n,...n.subinstructions]),c=[[n.lineNumber,0]];if(n.subinstructions.length>0){const e=n.subinstructions[n.subinstructions.length-1];c.push([e.lineNumber,e.line.length])}else c.push([n.lineNumber,n.line.length]);throw new s(t,i,c)},expectedSectionGotEmpty:(e,n)=>{const t=e.messages.validation.expectedSectionGotEmpty(n.name),i=o(e,n),c=[[n.lineNumber,0],[n.lineNumber,n.line.length]];throw new s(t,i,c)},expectedSectionGotField:(e,n)=>{const t=e.messages.validation.expectedSectionGotField(n.name),i=o(e,[n,...n.subinstructions]),c=[[n.lineNumber,0]];if(n.subinstructions.length>0){const e=n.subinstructions[n.subinstructions.length-1];c.push([e.lineNumber,e.line.length])}else c.push([n.lineNumber,n.line.length]);throw new s(t,i,c)},expectedSectionGotList:(e,n)=>{const t=e.messages.validation.expectedSectionGotList(n.name),i=o(e,[n,...n.subinstructions]),c=[[n.lineNumber,0]];if(n.subinstructions.length>0){const e=n.subinstructions[n.subinstructions.length-1];c.push([e.lineNumber,e.line.length])}else c.push([n.lineNumber,n.line.length]);throw new s(t,i,c)},expectedSectionGotSections:(e,n,t)=>{const i=t[t.length-1],c=[];for(let e of t)c.push(...e.subinstructions);const r=e.messages.validation.expectedSectionGotSections(n),a=o(e,[...t,...c]),l=[[t[0].lineNumber,0]];if(i.subinstructions.length>0){const e=i.subinstructions[i.subinstructions.length-1];l.push([e.lineNumber,e.line.length])}else l.push([i.lineNumber,i.line.length]);throw new s(r,a,l)},expectedSectionsGotDictionary:(e,n)=>{const t=e.messages.validation.expectedSectionsGotDictionary(n.name),i=o(e,[n,...n.subinstructions]),c=[[n.lineNumber,0]];if(n.subinstructions.length>0){const e=n.subinstructions[n.subinstructions.length-1];c.push([e.lineNumber,e.line.length])}else c.push([n.lineNumber,n.line.length]);throw new s(t,i,c)},expectedSectionsGotEmpty:(e,n)=>{const t=e.messages.validation.expectedSectionsGotEmpty(n.name),i=o(e,[n,...n.subinstructions]),c=[[n.lineNumber,0]];if(n.subinstructions.length>0){const e=n.subinstructions[n.subinstructions.length-1];c.push([e.lineNumber,e.line.length])}else c.push([n.lineNumber,n.line.length]);throw new s(t,i,c)},expectedSectionsGotField:(e,n)=>{const t=e.messages.validation.expectedSectionsGotField(n.name),i=o(e,[n,...n.subinstructions]),c=[[n.lineNumber,0]];if(n.subinstructions.length>0){const e=n.subinstructions[n.subinstructions.length-1];c.push([e.lineNumber,e.line.length])}else c.push([n.lineNumber,n.line.length]);throw new s(t,i,c)},expectedSectionsGotList:(e,n)=>{const t=e.messages.validation.expectedSectionsGotList(n.name),i=o(e,[n,...n.subinstructions]),c=[[n.lineNumber,0]];if(n.subinstructions.length>0){const e=n.subinstructions[n.subinstructions.length-1];c.push([e.lineNumber,e.line.length])}else c.push([n.lineNumber,n.line.length]);throw new s(t,i,c)},fabricateValueError:(e,n,t)=>{let c;c=n?"function"==typeof n?n(i):n:e.messages.validation.genericError(name);const r=o(e,t),a=[[t.lineNumber,t.ranges.value[0]],[t.lineNumber,t.ranges.value[1]]];return new s(c,r,a)},maxCountNotMet:(e,n,t,i,c)=>{const r=e.messages.validation.maxCountNotMet(n,t.count,i);let a,l;throw t.length>0?(a=[[t[0].lineNumber,0],[t[0].lineNumber,0]],l=o(e,t)):(a=c.lineNumber<e.instructions.length?[[c.lineNumber+1,0],[c.lineNumber+1,0]]:[[c.lineNumber,c.line.length],[c.lineNumber,c.line.length]],l=o(e,c.subinstructions)),new s(r,l,a)},minCountNotMet:(e,n,t,i,c)=>{const r=e.messages.validation.minCountNotMet(n,t.count,i);let a,l;throw t.length>0?(a=[[t[0].lineNumber,0],[t[0].lineNumber,0]],l=o(e,t)):(a=c.lineNumber<e.instructions.length?[[c.lineNumber+1,0],[c.lineNumber+1,0]]:[[c.lineNumber,c.line.length],[c.lineNumber,c.line.length]],l=o(e,c.subinstructions)),new s(r,l,a)},missingDictionary:(e,n,t)=>{const i=e.messages.validation.missingDictionary(n),c=o(e,t.subinstructions),r=[[t.lineNumber,t.ranges.name[1]],[t.lineNumber,t.ranges.name[1]]];throw new s(i,c,r)},missingDictionaryEntry:(e,n,t)=>{const i=e.messages.validation.missingDictionaryEntry(n),c=o(e,t.subinstructions),r=[[t.lineNumber,t.ranges.name[1]],[t.lineNumber,t.ranges.name[1]]];throw new s(i,c,r)},missingField:(e,n,t)=>{const i=e.messages.validation.missingField(n),c=o(e,t.subinstructions),r=[[t.lineNumber,t.ranges.name[1]],[t.lineNumber,t.ranges.name[1]]];throw new s(i,c,r)},missingList:(e,n,t)=>{const i=e.messages.validation.missingList(n),c=o(e,t.subinstructions),r=[[t.lineNumber,t.ranges.name[1]],[t.lineNumber,t.ranges.name[1]]];throw new s(i,c,r)},missingSection:(e,n,t)=>{const i=e.messages.validation.missingSection(n),c=o(e,t.subinstructions),r=[[t.lineNumber,t.ranges.name[1]],[t.lineNumber,t.ranges.name[1]]];throw new s(i,c,r)},valueError:(e,n,t)=>{let c;c=n?"function"==typeof n?n(i):n:e.messages.validation.genericError(name);const r=o(e,t),a=[[t.lineNumber,t.ranges.name[0]],[t.lineNumber,t.ranges.name[1]]];return new s(c,r,a)}}},function(e,n,t){const i=t(2);e.exports=class{constructor(e,n,t){if(this.context=e,this.instruction=n,this.name=n.name,this.parent=t,this.value=n.value||null,this.touched=!1,n.subinstructions)for(let e of n.subinstructions)e.element=this,"FIELD_APPEND"!==e.type?"BLOCK_CONTENT"!==e.type||(null===this.value?this.value=e.line:this.value+="\n"+e.line):null===this.value?this.value=e.value:this.value+=e.separator+e.value}getError(e){return i.fabricateValueError(this.context,e,this.instruction)}get(){return this.touched=!0,this.value}inspect(e=""){return`${e}${this.context.messages.inspection.value} ${this.value} (${this.name})`}raw(){return this.value}toString(){return this.inspect()}touch(){this.touched=!0}}},function(e,n){e.exports={analysis:{dictionaryEntryInList:e=>`Line ${e} contains a dictionary entry in the middle of a list.`,dictionaryEntryInField:e=>`line ${e} contains a dictionary entry in the middle of a field.`,duplicateDictionaryEntryName:(e,n)=>`The Dictionary" ${e} "contains two entries named" ${n} ".`,fieldAppendInDictionary:e=>`line ${e} contains a field extension in the middle of a dictionary.`,fieldAppendInList:e=>`line ${e} contains a field extension in the middle of a list.`,listItemInDictionary:e=>`Line ${e} contains a list entry in the middle of a dictionary.`,listItemInField:e=>`line ${e} contains a list entry in the middle of a field.`,missingNameForDictionaryEntry:e=>`Line ${e} contains a dictionary entry without a name being specified for a dictionary before.`,missingNameForFieldAppend:e=>`line ${e} contains a field extension without a name for a field being specified before.`,missingNameForListItem:e=>`line ${e} contains a list entry without a name for a list being specified before.`,sectionHierarchyLayerSkip:e=>`line ${e} starts a section that is more than one level lower than the current one.`},inspection:{dictionary:"Dictionary",dictionaryEntry:"Dictionary Entry",document:"Document",empty:"Empty element",field:"field",list:"List",listItem:"list entry",section:"Section",value:"value"},reporting:{contentHeader:"Content",gutterHeader:"Line"},resolution:{copyingBlockIntoDictionary:e=>`In line ${e} a block is copied into a dictionary.`,copyingBlockIntoList:e=>`In line ${e} a block is copied to a list.`,copyingBlockIntoSection:e=>`In line ${e} a block is copied into a section.`,copyingDictionaryIntoField:e=>`In line ${e} a dictionary is copied to a field.`,copyingDictionaryIntoList:e=>`In line ${e} a dictionary is copied to a list.`,copyingDictionaryIntoSection:e=>`In line ${e} a dictionary is copied into a section.`,copyingFieldIntoDictionary:e=>`In line ${e} a field is copied into a dictionary.`,copyingFieldIntoList:e=>`In line ${e} a field is copied to a list.`,copyingFieldIntoSection:e=>`In line ${e} a field is copied into a section.`,copyingListIntoField:e=>`In line ${e} a list is copied to a field.`,copyingListIntoDictionary:e=>`In line ${e} a list is copied into a dictionary.`,copyingListIntoSection:e=>`In line ${e} a list is copied into a section.`,copyingSectionIntoField:e=>`In line ${e} a section is copied to a field.`,copyingSectionIntoDictionary:e=>`In line ${e} a section is copied into a dictionary.`,copyingSectionIntoList:e=>`A line is copied to a list in line ${e} .`,cyclicDependency:(e,n)=>`In line ${e}" ${n} "is copied in itself.`,multipleTemplatesFound:(e,n)=>`In line ${e} it is not clear what element with the name" ${n} "should be copied.`,templateNotFound:(e,n)=>`In line ${e} the element" ${n} "should be copied, but it was not found.`},tokenization:{escapedUnterminatedName:e=>`In line ${e} the name of an element is escaped with backticks, but this escape sequence is not terminated until the end of the line.`,invalidLine:e=>`line ${e} does not follow a permitted pattern.`,unterminatedBlock:(e,n)=>`The block" ${e} "starting in line ${n} will not be terminated until the end of the document.`},validation:{exactCountNotMet:(e,n,t)=>`The field" ${e} "contains ${n} entries, but must contain exactly ${t} entries.`,excessName:e=>`The field" ${e} "is not provided, is it possibly a typo?`,expectedDictionaryGotDictionaries:e=>`Instead of the expected single collection" ${e} "several collections with this name were found.`,expectedDictionaryGotField:e=>`Instead of the expected collection" ${e} ", a field with this name was found.`,expectedDictionaryGotList:e=>`Instead of the expected collection" ${e} "a list with this name was found.`,expectedDictionaryGotSection:e=>`Instead of the expected collection" ${e} "a section with this name was found.`,expectedFieldGotDictionary:e=>`Instead of the expected field" ${e} "a collection with this name was found.`,expectedFieldGotList:e=>`Instead of the expected field" ${e} "a list with the same name was found.`,expectedFieldGotMultipleFields:e=>`Instead of the expected single field" ${e} "several fields with this name were found.`,expectedFieldGotSection:e=>`Instead of the expected field" ${e} "a section with this name was found.`,expectedListGotDictionary:e=>`" ${e} "must be a collection of values, but includes a collection.`,expectedListGotSection:e=>`" ${e} "must be a collection of values, but includes a section.`,expectedSectionGotDictionary:e=>`Under the name" ${e} "a dictionary was found, but there is a section provided.`,expectedSectionGotEmpty:e=>`Instead of the expected section" ${e} "an empty field was found.`,expectedSectionGotField:e=>`Instead of the expected section" ${e} "a field was found.`,expectedSectionGotList:e=>`The field" ${e} "contains a list but must contain a section.`,expectedSectionGotSections:e=>`Instead of the expected single section" ${e} "several sections were found.`,expectedSectionsGotDictionary:e=>`Only sections with the name" ${e} "were expected, but a collection was found.`,expectedSectionsGotEmpty:e=>`Instead of expected sections with the name" ${e} "an empty field was found.`,expectedSectionsGotField:e=>`Instead of expected sections named" ${e} ", a field with this name was found.`,expectedSectionsGotList:e=>`Sections named" ${e} "were expected, but a list was found.`,genericError:e=>`There is a problem with the field" ${e} ".`,maxCountNotMet:(e,n,t)=>`The field" ${e} "contains ${n} entries, but may only contain a maximum of ${t} entries.`,minCountNotMet:(e,n,t)=>`The field" ${e} "contains ${n} entries, but must contain at least ${t} entries.`,missingDictionary:e=>`The collection" ${e} "- if it has been specified - may be missing for typos and also case-sensitive.`,missingDictionaryEntry:e=>`The entry" ${e} "- if it has been specified - may be missing for typos and also case-sensitive .`,missingField:e=>`The field" ${e} "is missing.`,missingList:e=>`The list" ${e} "is missing - If the field was given you may be looking for typos and also case sensitive.`,missingSection:e=>`The section" ${e} "is missing.`}}},function(e,n){e.exports={analysis:{dictionaryEntryInList:e=>`Zeile ${e} enthält einen Dictionary Eintrag inmitten einer Liste.`,dictionaryEntryInField:e=>`Zeile ${e} enthält einen Dictionary Eintrag inmitten eines Felds.`,duplicateDictionaryEntryName:(e,n)=>`Das Dictionary "${e}" enthält zwei Einträge mit dem Namen "${n}".`,fieldAppendInDictionary:e=>`Zeile ${e} enthält eine Felderweiterung inmitten von einem Dictionary.`,fieldAppendInList:e=>`Zeile ${e} enthält eine Felderweiterung inmitten einer Liste.`,listItemInDictionary:e=>`Zeile ${e} enthält einen Listeneintrag inmitten von einem Dictionary.`,listItemInField:e=>`Zeile ${e} enthält einen Listeneintrag inmitten eines Felds.`,missingNameForDictionaryEntry:e=>`Zeile ${e} enthält einen Dictionary Eintrag ohne dass davor ein Name für ein Dictionary angegeben wurde.`,missingNameForFieldAppend:e=>`Zeile ${e} enthält einen Felderweiterung ohne dass davor ein Name für ein Feld angegeben wurde.`,missingNameForListItem:e=>`Zeile ${e} enthält einen Listeneintrag ohne dass davor ein Name für eine Liste angegeben wurde.`,sectionHierarchyLayerSkip:e=>`Zeile ${e} beginnt eine Sektion die mehr als eine Ebene tiefer liegt als die aktuelle.`},inspection:{dictionary:"Dictionary",dictionaryEntry:"Dictionary Eintrag",document:"Dokument",empty:"Leeres Element",field:"Feld",list:"Liste",listItem:"Listeneintrag",section:"Sektion",value:"Wert"},reporting:{contentHeader:"Inhalt",gutterHeader:"Zeile"},resolution:{copyingBlockIntoDictionary:e=>`In Zeile ${e} wird ein Block in ein Dictionary kopiert.`,copyingBlockIntoList:e=>`In Zeile ${e} wird ein Block in eine Liste kopiert.`,copyingBlockIntoSection:e=>`In Zeile ${e} wird ein Block in eine Sektion kopiert.`,copyingDictionaryIntoField:e=>`In Zeile ${e} wird ein Dictionary in ein Feld kopiert.`,copyingDictionaryIntoList:e=>`In Zeile ${e} wird ein Dictionary in eine Liste kopiert.`,copyingDictionaryIntoSection:e=>`In Zeile ${e} wird ein Dictionary in eine Sektion kopiert.`,copyingFieldIntoDictionary:e=>`In Zeile ${e} wird ein Feld in ein Dictionary kopiert.`,copyingFieldIntoList:e=>`In Zeile ${e} wird ein Feld in eine Liste kopiert.`,copyingFieldIntoSection:e=>`In Zeile ${e} wird ein Feld in eine Sektion kopiert.`,copyingListIntoField:e=>`In Zeile ${e} wird eine Liste in ein Feld kopiert.`,copyingListIntoDictionary:e=>`In Zeile ${e} wird eine Liste in ein Dictionary kopiert.`,copyingListIntoSection:e=>`In Zeile ${e} wird eine Liste in eine Sektion kopiert.`,copyingSectionIntoField:e=>`In Zeile ${e} wird eine Sektion in ein Feld kopiert.`,copyingSectionIntoDictionary:e=>`In Zeile ${e} wird eine Sektion in ein Dictionary kopiert.`,copyingSectionIntoList:e=>`In Zeile ${e} wird eine Sektion in eine Liste kopiert.`,cyclicDependency:(e,n)=>`In Zeile ${e} wird "${n}" in sich selbst kopiert.`,multipleTemplatesFound:(e,n)=>`In Zeile ${e} ist nicht klar welches Element mit dem Namen "${n}" kopiert werden soll.`,templateNotFound:(e,n)=>`In Zeile ${e} soll das Element "${n}" kopiert werden, es wurde aber nicht gefunden.`},tokenization:{escapedUnterminatedName:e=>`In Zeile ${e} wird der Name eines Elements mit Backticks escaped, jedoch wird diese Escape Sequenz bis zum Ende der Zeile nicht mehr beendet.`,invalidLine:e=>`Zeile ${e} folgt keinem erlaubten Muster.`,unterminatedBlock:(e,n)=>`Der Block "${e}" der in Zeile ${n} beginnt wird bis zum Ende des Dokuments nicht beendet.`},validation:{exactCountNotMet:(e,n,t)=>`Das Feld "${e}" enthält ${n} Einträge, muss aber genau ${t} Einträge enthalten.`,excessName:e=>`Das Feld "${e}" ist nicht vorgesehen, handelt es sich eventuell um einen Tippfehler?`,expectedDictionaryGotDictionaries:e=>`Statt der erwarteten einzelnen Kollektion "${e}" wurden mehrere Kollektionen mit diesem Namen vorgefunden.`,expectedDictionaryGotField:e=>`Statt der erwarteten Kollektion "${e}" wurden ein Feld mit diesem Namen vorgefunden.`,expectedDictionaryGotList:e=>`Statt der erwarteten Kollektion "${e}" wurde eine Liste mit diesem Namen vorgefunden.`,expectedDictionaryGotSection:e=>`Statt der erwarteten Kollektion "${e}" wurden eine Sektion mit diesem Namen vorgefunden.`,expectedFieldGotDictionary:e=>`Statt dem erwarteten Feld "${e}" wurde eine Kollektion mit diesem Namen vorgefunden.`,expectedFieldGotList:e=>`Statt dem erwarteten Feld "${e}" wurde eine Liste mit dem selben Namen vorgefunden.`,expectedFieldGotMultipleFields:e=>`Statt dem erwarteten einzelnen Feld "${e}" wurden mehrere Felder mit diesem Namen vorgefunden.`,expectedFieldGotSection:e=>`Statt dem erwarteten Feld "${e}" wurde eine Sektion mit diesem Namen vorgefunden.`,expectedListGotDictionary:e=>`"${e}" muss eine Auflistung von Werten sein, enhält jedoch eine Kollektion.`,expectedListGotSection:e=>`"${e}" muss eine Auflistung von Werten sein, enhält jedoch eine Sektion.`,expectedSectionGotDictionary:e=>`Unter dem Namen "${e}" wurde ein Dictionary vorgefunden, es ist aber eine Sektion vorgesehen.`,expectedSectionGotEmpty:e=>`Statt der erwarteten Sektion "${e}" wurde ein leeres Feld vorgefunden.`,expectedSectionGotField:e=>`Statt der erwarteten Sektion "${e}" wurde ein Feld vorgefunden.`,expectedSectionGotList:e=>`Das Feld "${e}" enthält eine Liste, muss aber eine Sektion enthalten.`,expectedSectionGotSections:e=>`Statt der erwarteten einzelnen Sektion "${e}" wurden mehrere Sektionen vorgefunden.`,expectedSectionsGotDictionary:e=>`Es wurden nur Sektionen mit dem Namen "${e}" erwartet, jedoch eine Kollektion vorgefunden.`,expectedSectionsGotEmpty:e=>`Statt erwarteten Sektionen mit dem Namen "${e}" wurde ein leeres Feld vorgefunden.`,expectedSectionsGotField:e=>`Statt erwarteten Sektionen mit dem Namen "${e}" wurde ein Feld mit diesem Namen vorgefunden.`,expectedSectionsGotList:e=>`Es wurden Sektionen mit dem Namen "${e}" erwartet, aber eine Liste vorgefunden.`,genericError:e=>`Es besteht ein Problem mit dem Feld "${e}".`,maxCountNotMet:(e,n,t)=>`Das Feld "${e}" enthält ${n} Einträge, darf aber nur maximal ${t} Einträge enthalten.`,minCountNotMet:(e,n,t)=>`Das Feld "${e}" enthält ${n} Einträge, muss aber mindestens ${t} Einträge enthalten.`,missingDictionary:e=>`Die Kollektion "${e}" fehlt - falls sie angegeben wurde eventuell nach Tippfehlern Ausschau halten und auch die Gross/Kleinschreibung beachten.`,missingDictionaryEntry:e=>`Der Eintrag "${e}" fehlt - falls er angegeben wurde eventuell nach Tippfehlern Ausschau halten und auch die Gross/Kleinschreibung beachten.`,missingField:e=>`Das Feld "${e}" fehlt.`,missingList:e=>`Die Liste "${e}" fehlt - Falls das Feld angegeben wurde eventuell nach Tippfehlern Ausschau halten und auch die Gross/Kleinschreibung beachten.`,missingSection:e=>`Die Sektion "${e}" fehlt.`}}},function(e,n,t){var i={"./de.js":5,"./en.js":4,"./es.js":21};function s(e){var n=o(e);return t(n)}function o(e){var n=i[e];if(!(n+1)){var t=new Error('Cannot find module "'+e+'".');throw t.code="MODULE_NOT_FOUND",t}return n}s.keys=function(){return Object.keys(i)},s.resolve=o,e.exports=s,s.id=6},function(e,n){n.EMPTY_INDEX=1;n.APPEND_WITH_NEWLINE_OPERATOR_INDEX=2,n.APPEND_WITH_NEWLINE_VALUE_INDEX=3;n.APPEND_WITH_SPACE_OPERATOR_INDEX=4,n.APPEND_WITH_SPACE_VALUE_INDEX=5;n.COMMENT_ANGLE_INDEX=6,n.COMMENT_TEXT_INDEX=7;n.LIST_ITEM_INDEX=8,n.LIST_ITEM_VALUE_INDEX=9;n.BLOCK_DASHES_INDEX=10,n.BLOCK_NAME_INDEX=11;n.SECTION_HASHES_INDEX=12;n.SECTION_NAME_UNESCAPED_INDEX=13;n.SECTION_NAME_ESCAPED_QUOTES_INDEX=14,n.SECTION_NAME_ESCAPED_INDEX=15;n.SECTION_TEMPLATE_INDEX=16;n.NAME_UNESCAPED_INDEX=17;n.NAME_ESCAPED_QUOTES_INDEX=18,n.NAME_ESCAPED_INDEX=19;n.NAME_OPERATOR_INDEX=20,n.FIELD_VALUE_INDEX=21;n.DICTIONARY_ENTRY_EQUALS_INDEX=22,n.DICTIONARY_ENTRY_VALUE_INDEX=23;n.TEMPLATE_INDEX=24;n.GRAMMAR_REGEXP=new RegExp("^\\s*(?:()|(?:(\\|)\\s*(.+?)?|(\\\\)\\s*(.+?)?|(>)\\s*(.+?)?|(-)(?!-)\\s*(.+?)?|(-{2,})\\s*(\\S.*?)|(#+)\\s*(?:(?!`)([^\\s<][^<]*?)|(`+)\\s*(\\S.*?)\\s*\\14)\\s*(?:<\\s*(\\S.*?))?|(?:(?![>#\\-`\\\\|])([^\\s:=<][^:=<]*?)|(`+)\\s*(\\S.*?)\\s*\\18)\\s*(?:(:)\\s*(.+?)?|(=)\\s*(.+?)?|<\\s*(\\S.*?))))\\s*$")},function(e,n,t){const{AdventureParseError:i}=t(0),s=t(1);e.exports={escapedUnterminatedName:(e,n)=>{const t=e.messages.tokenization.escapedUnterminatedName(n.lineNumber),o=s(e,n);throw new i(t,o)},invalidLine:(e,n)=>{const t=e.messages.tokenization.invalidLine(n.lineNumber),o=s(e,n),c=[[n.lineNumber,0],[n.lineNumber,n.line.length]];throw new i(t,o,c)},unterminatedBlock:(e,n)=>{const t=e.messages.tokenization.unterminatedBlock(n.name,n.lineNumber),o=s(e,n,e.instructions.filter(e=>e.lineNumber>n.lineNumber));throw new i(t,o)}}},function(e,n,t){const i=t(8),s=t(7);e.exports=(e=>{let n=null,t=null;for(let o of e.instructions){if(t){const e=n.exec(o.line);if(e){o.name=e[2],o.type="BLOCK_TERMINATOR";const i=e[1],s=o.line.indexOf(i),c=o.line.lastIndexOf(o.name);o.ranges={blockOperator:[s,s+i.length],name:[c,c+o.name.length]},n=null,t=null;continue}o.ranges={content:[0,o.line.length]},o.type="BLOCK_CONTENT";continue}const c=s.GRAMMAR_REGEXP.exec(o.line);if(c){if(void 0!==c[s.EMPTY_INDEX]){o.type="EMPTY";continue}if(c[s.COMMENT_ANGLE_INDEX]){o.type="COMMENT";const e=o.line.indexOf(">");if(o.ranges={commentOperator:[e,e+1]},o.text=c[s.COMMENT_TEXT_INDEX]||null,o.text){const e=o.line.lastIndexOf(o.text);o.ranges.comment=[e,e+o.text.length]}continue}if(c[s.NAME_OPERATOR_INDEX]){o.name=c[s.NAME_UNESCAPED_INDEX]||c[s.NAME_ESCAPED_INDEX];const e=o.line.indexOf(o.name),n=o.line.indexOf(":",e+o.name.length);o.ranges={nameOperator:[n,n+1],name:[e,e+o.name.length]};const t=c[s.FIELD_VALUE_INDEX];if(t){o.type="FIELD",o.value=t;const e=o.line.lastIndexOf(t);o.ranges.value=[e,e+t.length]}else o.type="NAME",o.ranges.value=[n+1,o.line.length];continue}if(c[s.LIST_ITEM_INDEX]){o.type="LIST_ITEM",o.value=c[s.LIST_ITEM_VALUE_INDEX]||null;const e=o.line.indexOf("-");if(o.ranges={itemOperator:[e,e+1]},o.value){const e=o.line.lastIndexOf(o.value);o.ranges.value=[e,e+o.value.length]}else o.ranges.value=[e+1,o.line.length];continue}if(c[s.DICTIONARY_ENTRY_EQUALS_INDEX]){o.name=c[s.NAME_UNESCAPED_INDEX]||c[s.NAME_ESCAPED_INDEX],o.type="DICTIONARY_ENTRY",o.value=c[s.DICTIONARY_ENTRY_VALUE_INDEX]||null;const e=o.line.indexOf(o.name),n=o.line.indexOf("=",e+o.name.length);if(o.ranges={entryOperator:[n,n+1],name:[e,e+o.name.length]},o.value){const e=o.line.lastIndexOf(o.value);o.ranges.value=[e,e+o.value.length]}else o.ranges.value=[n+1,o.line.length];continue}const e=c[s.BLOCK_DASHES_INDEX];if(e){o.name=c[s.BLOCK_NAME_INDEX],o.type="BLOCK";const i=o.line.indexOf(e),r=o.line.lastIndexOf(o.name);o.ranges={blockOperator:[i,i+e.length],name:[r,r+o.name.length]};const a=o.name.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&");n=new RegExp(`^\\s*(${e})\\s*(${a})\\s*$`),t=o;continue}if(c[s.APPEND_WITH_NEWLINE_OPERATOR_INDEX]){o.separator="\n",o.type="FIELD_APPEND",o.value=c[s.APPEND_WITH_NEWLINE_VALUE_INDEX]||null;const e=o.line.indexOf("|");if(o.ranges={pipe:[e,e+1]},o.value){const e=o.line.lastIndexOf(o.value);o.ranges.value=[e,e+o.value.length]}else o.ranges.value=[e+1,o.line.length];continue}if(c[s.APPEND_WITH_SPACE_OPERATOR_INDEX]){o.separator=" ",o.type="FIELD_APPEND",o.value=c[s.APPEND_WITH_SPACE_VALUE_INDEX]||null;const e=o.line.indexOf("\\");if(o.ranges={backslash:[e,e+1]},o.value){const e=o.line.lastIndexOf(o.value);o.ranges.value=[e,e+o.value.length]}else o.ranges.value=[e+1,o.line.length];continue}const i=c[s.SECTION_HASHES_INDEX];if(i){o.depth=i.length,o.name=c[s.SECTION_NAME_UNESCAPED_INDEX]||c[s.SECTION_NAME_ESCAPED_INDEX],o.type="SECTION";const n=o.line.indexOf(e),t=o.line.indexOf(o.name,n+i.length);o.ranges={hashes:[n,n+i.length],name:[t,t+o.name.length]};const r=c[s.SECTION_TEMPLATE_INDEX];if(r){o.template=r;const e=o.line.indexOf("<",t+o.name.length),n=o.line.indexOf(r,e+1);o.ranges.copyOperator=[e,e+1],o.ranges.template=[n,n+r.length]}continue}const r=c[s.TEMPLATE_INDEX];if(r){o.name=c[s.NAME_UNESCAPED_INDEX]||c[s.NAME_ESCAPED_INDEX],o.template=r,o.type="NAME";const e=o.line.indexOf(o.name),n=o.line.indexOf("<",e+o.name.length),t=o.line.indexOf(r,n+1);o.ranges={template:[t,t+r.length],copyOperator:[n,n+1],name:[e,e+o.name.length]};continue}}else i.invalidLine(e,o)}t&&i.unterminatedBlock(e,t)})},function(e,n,t){const{AdventureParseError:i}=t(0),s=t(1);e.exports={copyingBlockIntoDictionary:(e,n)=>{const t=e.messages.resolution.copyingBlockIntoDictionary(n.lineNumber),o=s(e,n);throw new i(t,o)},copyingBlockIntoList:(e,n)=>{const t=e.messages.resolution.copyingBlockIntoList(n.lineNumber),o=s(e,n);throw new i(t,o)},copyingBlockIntoSection:(e,n)=>{const t=e.messages.resolution.copyingBlockIntoSection(n.lineNumber),o=s(e,n);throw new i(t,o)},copyingDictionaryIntoField:(e,n)=>{const t=e.messages.resolution.copyingDictionaryIntoField(n.lineNumber),o=s(e,n);throw new i(t,o)},copyingDictionaryIntoList:(e,n)=>{const t=e.messages.resolution.copyingDictionaryIntoList(n.lineNumber),o=s(e,n);throw new i(t,o)},copyingDictionaryIntoSection:(e,n)=>{const t=e.messages.resolution.copyingDictionaryIntoSection(n.lineNumber),o=s(e,n);throw new i(t,o)},copyingFieldIntoDictionary:(e,n)=>{const t=e.messages.resolution.copyingFieldIntoDictionary(n.lineNumber),o=s(e,n);throw new i(t,o)},copyingFieldIntoList:(e,n)=>{const t=e.messages.resolution.copyingFieldIntoList(n.lineNumber),o=s(e,n);throw new i(t,o)},copyingFieldIntoSection:(e,n)=>{const t=e.messages.resolution.copyingFieldIntoSection(n.lineNumber),o=s(e,n);throw new i(t,o)},copyingListIntoDictionary:(e,n)=>{const t=e.messages.resolution.copyingListIntoDictionary(n.lineNumber),o=s(e,n);throw new i(t,o)},copyingListIntoField:(e,n)=>{const t=e.messages.resolution.copyingListIntoField(n.lineNumber),o=s(e,n);throw new i(t,o)},copyingListIntoSection:(e,n)=>{const t=e.messages.resolution.copyingListIntoSection(n.lineNumber),o=s(e,n);throw new i(t,o)},copyingSectionIntoDictionary:(e,n)=>{const t=e.messages.resolution.copyingSectionIntoDictionary(n.lineNumber),o=s(e,n);throw new i(t,o)},copyingSectionIntoField:(e,n)=>{const t=e.messages.resolution.copyingSectionIntoField(n.lineNumber),o=s(e,n);throw new i(t,o)},copyingSectionIntoList:(e,n)=>{const t=e.messages.resolution.copyingSectionIntoList(n.lineNumber),o=s(e,n);throw new i(t,o)},cyclicDependency:(e,n,t)=>{const o=t.indexOf(n),c=t.slice(o),r=c[0],a=c[c.length-1];a.template===r.name?copyInstruction=a:r.template===a.name&&(copyInstruction=r);const l=e.messages.resolution.cyclicDependency(copyInstruction.lineNumber,copyInstruction.template),u=s(e,c),d=[[copyInstruction.lineNumber,copyInstruction.ranges.template[0]],[copyInstruction.lineNumber,copyInstruction.ranges.template[1]]];throw new i(l,u,d)},multipleTemplatesFound:(e,n,t)=>{const o=e.messages.resolution.multipleTemplatesFound(n.lineNumber,n.template),c=s(e,[n,...t]);throw new i(o,c)},templateNotFound:(e,n)=>{const t=e.messages.resolution.templateNotFound(n.lineNumber,n.template),o=s(e,n);throw new i(t,o)}}},function(e,n,t){const i=t(10),s=(e,n)=>{for(let t=n.subinstructions.length-1;t>=0;t--){const i=n.subinstructions[t];"BLOCK_CONTENT"===i.type&&e.subinstructions.unshift({lineNumber:i.lineNumber,ranges:i.ranges,separator:"\n",type:"FIELD_APPEND",value:i.line})}},o=(e,n)=>{n.value&&e.subinstructions.unshift({lineNumber:n.lineNumber,ranges:n.ranges,separator:"\n",type:"FIELD_APPEND",value:n.value}),c(e,n)},c=(e,n)=>{for(let t=n.subinstructions.length-1;t>=0;t--){const i=n.subinstructions[t];if("COMMENT"===i.type||"EMPTY"===i.type)continue;const s=Object.assign({},n.subinstructions[t]);e.subinstructions.unshift(s)}},r=(e,n)=>{const t=e.subinstructions.filter(e=>"DICTIONARY_ENTRY"===e.type).map(e=>e.name);for(let i=n.subinstructions.length-1;i>=0;i--){const s=n.subinstructions[i];if("DICTIONARY_ENTRY"===s.type&&!t.includes(s.name)){const n=Object.assign({},s);e.subinstructions.unshift(n)}}},a=(e,n)=>{const t={};for(let i=n.subinstructions.length-1;i>=0;i--){const s=n.subinstructions[i];if("COMMENT"===s.type||"EMPTY"===s.type)continue;let o=t[s.name];if(void 0===o&&(o=e.subinstructions.filter(e=>e.name===s.name),t[s.name]=o),0!==o.length){if(!(o.length>1)){if("DICTIONARY"===s.type&&"DICTIONARY"===o[0].type){1===n.subinstructions.filter(e=>e.name===s.name).length&&r(o[0],s)}if("SECTION"===s.type&&"SECTION"===o[0].type){1===n.subinstructions.filter(e=>e.name===s.name).length&&a(o[0],s)}}}else{const n=Object.assign({},s);e.subinstructions.unshift(n)}}},l=(e,n,t=[])=>{if("EMPTY"!==n.type&&"COMMENT"!==n.type){if(t.includes(n)&&i.cyclicDependency(e,n,t),"SECTION"===n.type)for(let i of n.subinstructions)l(e,i,[...t,n]);if(n.template&&!n.consolidated){const u=e.templateIndex[n.template];void 0===u&&i.templateNotFound(e,n),u.length>1&&i.multipleTemplatesFound(e,n,u);const d=u[0];l(e,d,[...t,n]),((e,n,t)=>{if("NAME"!==t.type)"NAME"===n.type?("BLOCK"===t.type&&(n.type="FIELD",s(n,t)),"FIELD"===t.type&&(n.type="FIELD",o(n,t)),"DICTIONARY"===t.type&&(n.type="DICTIONARY",c(n,t)),"LIST"===t.type&&(n.type="LIST",c(n,t))):"SECTION"===n.type?("SECTION"===t.type&&a(n,t),"BLOCK"===t.type&&i.copyingBlockIntoSection(e,n),"DICTIONARY"===t.type&&i.copyingDictionaryIntoSection(e,n),"FIELD"===t.type&&i.copyingFieldIntoSection(e,n),"LIST"===t.type&&i.copyingListIntoSection(e,n)):"DICTIONARY"===n.type?("DICTIONARY"===t.type&&r(n,t),"BLOCK"===t.type&&i.copyingBlockIntoDictionary(e,n),"FIELD"===t.type&&i.copyingFieldIntoDictionary(e,n),"LIST"===t.type&&i.copyingListIntoDictionary(e,n),"SECTION"===t.type&&i.copyingSectionIntoDictionary(e,n)):"LIST"===n.type?("LIST"===t.type&&c(n,t),"BLOCK"===t.type&&i.copyingBlockIntoList(e,n),"FIELD"===t.type&&i.copyingFieldIntoList(e,n),"DICTIONARY"===t.type&&i.copyingDictionaryIntoList(e,n),"SECTION"===t.type&&i.copyingSectionIntoList(e,n)):"FIELD"===n.type&&("FIELD"===t.type&&o(n,t),"BLOCK"===t.type&&s(n,t),"DICTIONARY"===t.type&&i.copyingDictionaryIntoField(e,n),"LIST"===t.type&&i.copyingListIntoField(e,n),"SECTION"===t.type&&i.copyingSectionIntoField(e,n))})(e,n,d),n.consolidated=!0;const p=e.unresolvedInstructions.indexOf(n);e.unresolvedInstructions.splice(p,1)}}};e.exports=(e=>{for(;e.unresolvedInstructions.length>0;)l(e,e.unresolvedInstructions[0])})},function(e,n,t){const{AdventureParseError:i}=t(0),s=t(1);e.exports={dictionaryEntryInField:(e,n,t)=>{const o=e.messages.analysis.dictionaryEntryInField(n.lineNumber),c=s(e,n,[t,...t.subinstructions]);throw new i(o,c)},dictionaryEntryInList:(e,n,t)=>{const o=e.messages.analysis.dictionaryEntryInList(n.lineNumber),c=s(e,n,[t,...t.subinstructions]);throw new i(o,c)},duplicateDictionaryEntryName:(e,n,t)=>{const o=e.messages.analysis.duplicateDictionaryEntryName(n.name,t.name),c=s(e,[t,n.subinstructions.find(e=>e.name===t.name)],[n,...n.subinstructions]);throw new i(o,c)},fieldAppendInDictionary:(e,n,t)=>{const o=e.messages.analysis.dictionaryEntryInList(n.lineNumber),c=s(e,n,[t,...t.subinstructions]);throw new i(o,c)},fieldAppendInList:(e,n,t)=>{const o=e.messages.analysis.fieldAppendInList(n.lineNumber),c=s(e,n,[t,...t.subinstructions]);throw new i(o,c)},listItemInField:(e,n,t)=>{const o=e.messages.analysis.listItemInField(n.lineNumber),c=s(e,n,[t,...t.subinstructions]);throw new i(o,c)},listItemInDictionary:(e,n,t)=>{const o=e.messages.analysis.listItemInDictionary(n.lineNumber),c=s(e,n,[t,...t.subinstructions]);throw new i(o,c)},missingNameForDictionaryEntry:(e,n)=>{const t=e.messages.analysis.missingNameForDictionaryEntry(n.lineNumber),o=s(e,n);throw new i(t,o)},missingNameForFieldAppend:(e,n)=>{const t=e.messages.analysis.missingNameForFieldAppend(n.lineNumber),o=s(e,n);throw new i(t,o)},missingNameForListItem:(e,n)=>{const t=e.messages.analysis.missingNameForListItem(n.lineNumber),o=s(e,n);throw new i(t,o)},sectionHierarchyLayerSkip:(e,n,t)=>{const o=e.messages.analysis.sectionHierarchyLayerSkip(n.lineNumber),c=s(e,[n,t]);throw new i(o,c)}}},function(e,n,t){const i=t(12);e.exports=(e=>{e.documentInstruction={depth:0,lineNumber:1,name:"<>#:=|\\_ADVENTURE_DOCUMENT",ranges:{hashes:[0,0],name:[0,0]},subinstructions:[]},e.unresolvedInstructions=[];let n=null,t=null,s=e.documentInstruction,o=[e.documentInstruction],c=[];for(let r of e.instructions)if("EMPTY"!==r.type&&"COMMENT"!==r.type)if("BLOCK_CONTENT"!==r.type)if("FIELD"!==r.type)if("NAME"!==r.type){if("LIST_ITEM"===r.type){if(null===t&&i.missingNameForListItem(e,r),t.subinstructions.push(...c),c=[],r.name=t.name,"LIST"===t.type){t.subinstructions.push(r);continue}if("NAME"===t.type){t.type="LIST",t.subinstructions.push(r);continue}"DICTIONARY"===t.type&&i.listItemInDictionary(e,r,t),"FIELD"===t.type&&i.listItemInField(e,r,t)}if("DICTIONARY_ENTRY"===r.type){if(null===t&&i.missingNameForDictionaryEntry(e,r),t.subinstructions.push(...c),c=[],"DICTIONARY"===t.type){n.has(r.name)?i.duplicateDictionaryEntryName(e,t,r):n.add(r.name),t.subinstructions.push(r);continue}if("NAME"===t.type){t.type="DICTIONARY",t.subinstructions.push(r),n=new Set([r.name]);continue}"LIST"===t.type&&i.dictionaryEntryInList(e,r,t),"FIELD"===t.type&&i.dictionaryEntryInField(e,r,t)}if("BLOCK"!==r.type)if("BLOCK_TERMINATOR"!==r.type){if("FIELD_APPEND"===r.type){if(null===t&&i.missingNameForFieldAppend(e,r),t.subinstructions.push(...c),c=[],"FIELD"===t.type){t.subinstructions.push(r);continue}if("NAME"===t.type){t.type="FIELD",t.subinstructions.push(r);continue}"DICTIONARY"===t.type&&i.fieldAppendInDictionary(e,r,t),"LIST"===t.type&&i.fieldAppendInList(e,r,t)}if("SECTION"!==r.type);else{if(s.subinstructions.push(...c),c=[],r.depth-s.depth>1&&i.sectionHierarchyLayerSkip(e,r,s),r.depth>s.depth)s.subinstructions.push(r);else{for(;o[o.length-1].depth>=r.depth;)o.pop();o[o.length-1].subinstructions.push(r)}if(t=null,s=r,o.push(r),r.template&&e.unresolvedInstructions.push(r),r.name!==r.template){const n=e.templateIndex[r.name];n?n.push(r):e.templateIndex[r.name]=[r]}r.subinstructions=[]}}else t.subinstructions.push(r),t=null;else{s.subinstructions.push(...c),c=[],r.subinstructions=[],t=r;const n=e.templateIndex[r.name];n?n.push(r):e.templateIndex[r.name]=[r],s.subinstructions.push(r)}}else{if(s.subinstructions.push(...c),c=[],r.subinstructions=[],t=r,r.template&&e.unresolvedInstructions.push(r),r.name!==r.template){const n=e.templateIndex[r.name];n?n.push(r):e.templateIndex[r.name]=[r]}s.subinstructions.push(r)}else{s.subinstructions.push(...c),c=[],r.subinstructions=[],t=r;const n=e.templateIndex[r.name];n?n.push(r):e.templateIndex[r.name]=[r],s.subinstructions.push(r)}else t.subinstructions.push(r);else t?c.push(r):s.subinstructions.push(r)})},function(e,n,t){const i=t(3);e.exports=class{constructor(e,n,t){this.context=e,this.instruction=n,this.name=n.name,this.parent=t,this.touched=!1,this.values=[];for(let t of n.subinstructions)"LIST_ITEM"===t.type?(t.element=new i(e,t,this),this.values.push(t.element)):t.element=this}inspect(e=""){const n=[`${e}${this.context.messages.inspection.list} ${this.name}`];e+="  ";for(let t of this.values)n.push(`${e}${this.context.messages.inspection.listItem} ${t.value}`);return n.join("\n")}raw(){return this.values.map(e=>e.get())}toString(){return this.inspect()}touch(){this.touched=!0;for(let e of this.values)e.touch()}}},function(e,n,t){const i=t(2);e.exports=class{constructor(e,n,t){this.context=e,this.name=n.name,this.parent=t,this.touched=!1}getError(e){return i.fabricateValueError(this.context,e,this.instruction)}get(){return this.touched=!0,null}raw(){return null}touch(){this.touched=!0}}},function(e,n,t){const i=t(3),s=t(2);e.exports=class{constructor(e,n,t){this.context=e,this.instruction=n,this.name=n.name,this.parent=t,this.entries={},this.enforcePresenceDefault=!1,this.touched=!1;for(let t of n.subinstructions)"DICTIONARY_ENTRY"===t.type?(t.element=new i(e,t,this),this.entries[t.name]=t.element):t.element=this}entry(e,...n){let t={enforcePresence:this.enforcePresenceDefault,required:!1,withTrace:!1},i=null;for(let e of n)"function"==typeof e?i=e:"object"==typeof e&&Object.assign(t,e);const o=this.entries[e];if(void 0===o)return t.enforcePresence&&s.missingDictionaryEntry(this.context,e,this.instruction),t.withTrace?{trace:null,value:null}:null;if(null===o.value)return t.required&&s.missingDictionaryEntry(this.context,e,this.instruction),t.withTrace?{trace:null,value:null}:null;if(i)try{const e=i(o);return t.withTrace?{trace:o,value:e}:e}catch(e){s.valueError(this.context,e,element.instruction)}return t.withTrace?{trace:o,value:o.get()}:o.get()}enforcePresence(e){this.enforcePresenceDefault=void 0===e||e}inspect(e=""){const n=[`${e}${this.context.messages.inspection.dictionary} ${this.name}`];e+="  ";for(let[t,i]of Object.entries(this.entries))n.push(`${e}${this.context.messages.inspection.dictionaryEntry} ${t} = ${i.value}`);return n.join("\n")}raw(){const e={};for(let n of Object.keys(this.entries))e[n]=this.entries[n].get();return e}toString(){return this.inspect()}touch(){this.touched=!0}}},function(e,n,t){const i=t(2),s=t(16),o=t(15),c=t(14),r=t(3);class a{constructor(e,n,t){this.context=e,this.instruction=n,this.name=n.name,this.parent=t,this.elementsAssociative={},this.elementsSequential=[],this.enforcePresenceDefault=!1,this.touched=!1;const i=e=>{this.elementsSequential.push(e);const n=this.elementsAssociative[e.name];void 0===n?this.elementsAssociative[e.name]=[e]:n.push(e)};for(let t of n.subinstructions)"COMMENT"!==t.type&&"EMPTY"!==t.type?"NAME"!==t.type?"FIELD"!==t.type?"LIST"!==t.type?"BLOCK"!==t.type?"DICTIONARY"!==t.type?"SECTION"!==t.type||(t.element=new a(e,t,this),i(t.element)):(t.element=new s(e,t,this),i(t.element)):(t.element=new r(e,t,this),i(t.element)):(t.element=new c(e,t,this),i(t.element)):(t.element=new r(e,t,this),i(t.element)):(t.element=new o(e,t,this),i(t.element)):t.element=this}assertAllTouched(e={}){let n;e.only?n=e.only:(n=Object.keys(this.elementsAssociative),e.except&&(n=n.filter(n=>!e.except.includes(n))));for(let e of n){const n=this.elementsAssociative[e];if(void 0!==n)for(let e of n)e.touched||i.excessName(this.context,e.instruction),e instanceof a&&e.assertAllTouched()}}dictionary(e,...n){let t={enforcePresence:this.enforcePresenceDefault};for(let e of n)"object"==typeof e&&Object.assign(t,e);const s=this.elementsAssociative[e];if(void 0===s)return t.enforcePresence&&i.missingDictionary(this.context,e,this),null;for(let e of s)e.touch(),e instanceof c&&i.expectedDictionaryGotList(this.context,e.instruction),e instanceof a&&i.expectedDictionaryGotSection(this.context,e.instruction),e instanceof r&&i.expectedDictionaryGotField(this.context,e.instruction);if(1===s.length){const e=s[0];return e instanceof o?null:e}s.length>1&&i.expectedDictionaryGotDictionaries(this.context,s.map(e=>e.instruction))}enforcePresence(e){this.enforcePresenceDefault=void 0===e||e;for(let n of this.elementsSequential)(n instanceof s||n instanceof a)&&n.enforcePresence(e)}field(e,...n){let t={enforcePresence:this.enforcePresenceDefault,required:!1,withTrace:!1},r=null;for(let e of n)"function"==typeof e?r=e:"object"==typeof e&&Object.assign(t,e);const l=this.elementsAssociative[e];if(void 0===l)return t.enforcePresence&&i.missingField(this.context,e,this.instruction),t.withTrace?{trace:null,value:null}:null;for(let e of l)e.touch(),e instanceof s&&i.expectedFieldGotDictionary(this.context,e.instruction),e instanceof c&&i.expectedFieldGotList(this.context,e.instruction),e instanceof a&&i.expectedFieldGotSection(this.context,e.instruction);if(1===l.length){const n=l[0];if(n instanceof o||null===n.value)return t.required&&i.missingField(this.context,e,this.instruction),t.withTrace?{trace:null,value:null}:null;if(r)try{const e=r(n);return t.withTrace?{trace:n,value:e}:e}catch(e){i.valueError(this.context,e,n.instruction)}return t.withTrace?{trace:n,value:n.get()}:n.get()}l.length>1&&i.expectedFieldGotMultipleFields(this.context,e,l.map(e=>e.instruction))}inspect(e=""){const n=[];"<>#:=|\\_ADVENTURE_DOCUMENT"===this.name?n.push(`${e}${this.context.messages.inspection.document}`):n.push(`${e}${this.context.messages.inspection.section} ${this.name}`),e+="  ";for(let t of this.elementsSequential)t instanceof o?n.push(`${e}${this.context.messages.inspection.empty} ${t.name}`):t instanceof r?n.push(`${e}${this.context.messages.inspection.field} ${t.name}: ${t.value}`):t instanceof c?n.push(t.inspect(e)):t instanceof s?n.push(t.inspect(e)):t instanceof a&&n.push(t.inspect(e));return n.join("\n")}list(e,...n){let t={enforcePresence:this.enforcePresenceDefault,exactCount:null,includeEmpty:!1,maxCount:null,minCount:null,withTrace:!1},o=null;for(let e of n)"function"==typeof e?o=e:"object"==typeof e&&Object.assign(t,e);const l=this.elementsAssociative[e];if(void 0===l)return t.enforcePresence&&i.missingList(this.context,e,this.instruction),[];const u=[];for(let e of l){if(e.touch(),e instanceof c||e instanceof r){const n=e instanceof c?e.values:[e];for(let e of n)if(t.includeEmpty||null!==e.value){if(o){try{const n=o(e);t.withTrace?u.push({trace:e,value:n}):u.push(n)}catch(n){i.valueError(this.context,n,e.instruction)}continue}t.withTrace?u.push({trace:e,value:e.get()}):u.push(e.get())}}e instanceof s&&i.expectedListGotDictionary(this.context,e.instruction),e instanceof a&&i.expectedListGotSection(this.context,e.instruction)}return null!==t.exactCount&&u.length!==t.exactCount&&i.exactCountNotMet(this.context,e,u.map(e=>e.instruction),t.exactCount,this),null!==t.minCount&&u.length<t.minCount&&i.minCountNotMet(this.context,e,u.map(e=>e.instruction),t.minCount,this),null!==t.maxCount&&u.length>t.maxCount&&i.maxCountNotMet(this.context,e,u.map(e=>e.instruction),t.minCount,this),u}lookup(...e){let n,t;if(1===e.length){n=1,t=0;for(let i=0;i<=e[0];i++)i>0&&"\n"===this.context.input.charAt(i-1)?(n++,t=0):t++}else n=e[0],t=e[1];const i=this.context.instructions.find(e=>e.lineNumber===n);if(i){const e={element:i.element,zone:"element"};if(i.ranges)for(let[n,s]of Object.entries(i.ranges))if(t>=s[0]&&t<=s[1]){e.zone=n;break}return e}return null}raw(){const e={};for(let n of Object.keys(this.elementsAssociative)){const t=this.elementsAssociative[n];e[n]=t.map(e=>e.raw())}return e}section(e,...n){let t={enforcePresence:this.enforcePresenceDefault};for(let e of n)"object"==typeof e&&Object.assign(t,e);const a=this.elementsAssociative[e];if(void 0===a)return t.enforcePresence&&i.missingSection(this.context,e,this),null;for(let e of a)e.touch(),e instanceof s&&i.expectedSectionGotDictionary(this.context,e.instruction),e instanceof o&&i.expectedSectionGotEmpty(this.context,e.instruction),e instanceof c&&i.expectedSectionGotList(this.context,e.instruction),e instanceof r&&i.expectedSectionGotField(this.context,e.instruction);if(1===a.length)return a[0];error.expectedSectionGotSections(this.context,e,a.map(e=>e.instruction))}sections(e){const n=this.elementsAssociative[e];if(void 0===n)return[];for(let e of n)e.touch(),e instanceof s&&i.expectedSectionsGotDictionary(this.context,e.instruction),e instanceof o&&i.expectedSectionsGotEmpty(this.context,e.instruction),e instanceof c&&i.expectedSectionsGotList(this.context,e.instruction),e instanceof r&&i.expectedSectionsGotField(this.context,e.instruction);return n}sequential(){return this.elementsSequential.forEach(e=>e.touch()),this.elementsSequential}touch(){this.touched=!0}}e.exports=a},function(e,n,t){const i=t(17),s=t(13),o=t(11),c=t(9);e.exports=class{constructor(e,n){const i=e.split(/\r?\n/).map((e,n)=>({line:e,lineNumber:n+1}));this.context={input:e,instructions:i,messages:t(6)(`./${n}.js`),locale:n,templateIndex:{}}}run(){return c(this.context),s(this.context),o(this.context),this.context.document=new i(this.context,this.context.documentInstruction,null),this.context.document}}},function(e,n,t){const i=t(18),{AdventureParseError:s,AdventureValidationError:o}=t(0),c=["de","en","es"];e.exports={AdventureParseError:s,AdventureValidationError:o,build:e=>{if("object"!=typeof e)throw new TypeError(`The builder accepts only objects as input, input was: ${e}`)},parse:(e,n="de")=>{if("string"!=typeof e)throw new TypeError(`The parser accepts only strings as input, input was: ${e}`);if(!c.includes(n))throw new RangeError(`The requested locale "${n}" is not supported. Translation contributions are `+"very welcome and an easy thing to do - only a few easy messages need to be translated!");return new i(e,n).run()}}},function(e,n,t){"use strict";var i=t(19),s=null,o=document.querySelector("#editor"),c=document.querySelector("#log"),r=location.hash.length>0?location.hash.substr(1):"en",a=function(){try{var e=s.lookup(o.selectionStart);e&&(c.innerHTML="<b>lookup()</b><br/><br/>=&gt; "+e.zone+"<br/><br/>"+e.element.inspect())}catch(e){console.log(e),e instanceof i.AdventureParseError&&(c.innerHTML=e)}};o.addEventListener("click",a),o.addEventListener("focus",a),o.addEventListener("keyup",function(e){["ArrowLeft","ArrowRight","ArrowDown","ArrowUp"].includes(e.key)&&a()});var l=function(){var e=o.value;try{s=(0,i.parse)(e,r),c.innerHTML="<b>inspect()</b><br/><br/>"+s.inspect()+"<br/><br/><b>raw()</b><br/><br/>"+JSON.stringify(s.raw(),null,2)}catch(e){e instanceof i.AdventureParseError&&(c.innerHTML=e)}};window.addEventListener("hashchange",function(){r=location.hash.length>0?location.hash.substr(1):"en",console.log(r),l()}),o.addEventListener("input",l),l()},function(e,n){e.exports={analysis:{dictionaryEntryInList:e=>`Line ${e} contiene una entrada de diccionario en el medio de una lista.`,dictionaryEntryInField:e=>`line ${e} contiene una entrada de diccionario en el medio de un campo.`,duplicateDictionaryEntryName:(e,n)=>`El diccionario" ${e} "contiene dos entradas llamadas" ${n} ".`,fieldAppendInDictionary:e=>`line ${e} contiene una extensión de campo en el medio de un diccionario.`,fieldAppendInList:e=>`line ${e} contiene una extensión de campo en el medio de una lista.`,listItemInDictionary:e=>`Line ${e} contiene una entrada de lista en el medio de un diccionario.`,listItemInField:e=>`line ${e} contiene una entrada de lista en el medio de un campo.`,missingNameForDictionaryEntry:e=>`Line ${e} contiene una entrada de diccionario sin un nombre especificado para un diccionario antes.`,missingNameForFieldAppend:e=>`line ${e} contiene una extensión de campo sin un nombre para un campo que se haya especificado antes.`,missingNameForListItem:e=>`line ${e} contiene una entrada de lista sin nombre para una lista especificada antes.`,sectionHierarchyLayerSkip:e=>`line ${e} inicia una sección que es más de un nivel más bajo que el actual.`},inspection:{dictionary:"Diccionario",dictionaryEntry:"Entrada de diccionario",document:"Documento",empty:"elemento vacío",field:"campo",lista:"Lista",listItem:"list entry",section:"Sección",value:"valor"},reporting:{contentHeader:"Contenido",gutterHeader:"Fila"},resolution:{copyingBlockIntoDictionary:e=>`En la línea ${e}, un bloque se copia en un diccionario.`,copyingBlockIntoList:e=>`En la línea ${e} se copia un bloque a una lista.`,copyingBlockIntoSection:e=>`En la línea ${e}, un bloque se copia en una sección.`,copyingDictionaryIntoField:e=>`En la línea ${e}, se copia un diccionario en un campo.`,copyingDictionaryIntoList:e=>`En la línea ${e}, se copia un diccionario a una lista.`,copyingDictionaryIntoSection:e=>`En la línea ${e}, se copia un diccionario en una sección.`,copyingFieldIntoDictionary:e=>`En la línea ${e}, un campo se copia en un diccionario.`,copyingFieldIntoList:e=>`En la línea ${e} se copia un campo a una lista.`,copyingFieldIntoSection:e=>`En la línea ${e}, se copia un campo en una sección.`,copyingListIntoField:e=>`En la línea ${e}, se copia una lista en un campo.`,copyingListIntoDictionary:e=>`En la línea ${e}, se copia una lista en un diccionario.`,copyingListIntoSection:e=>`En la línea ${e}, se copia una lista en una sección.`,copyingSectionIntoField:e=>`En la línea ${e}, se copia una sección en un campo.`,copyingSectionIntoDictionary:e=>`En la línea ${e}, una sección se copia en un diccionario.`,copyingSectionIntoList:e=>`Una línea se copia a una lista en la línea ${e} .`,cyclicDependency:(e,n)=>`En la línea ${e}" ${n} "se copia en sí mismo.`,multipleTemplatesFound:(e,n)=>`En la línea ${e} no está claro qué elemento con el nombre" ${n} "debe copiarse.`,templateNotFound:(e,n)=>`En la línea ${e} debe copiarse el elemento" ${n} ", pero no se encontró.`},tokenization:{escapedUnterminatedName:e=>`En la línea ${e}, el nombre de un elemento se escapa con backticks, pero esta secuencia de escape no termina hasta el final de la línea.`,invalidLine:e=>`line ${e} no sigue un patrón permitido.`,subminatedBlock:(e,n)=>`El bloque" ${e} "que comienza en la línea ${n} no terminará hasta el final del documento.`},validation:{exactCountNotMet:(e,n,t)=>`El campo "${e}"contiene ${n} entradas, pero debe contener exactamente ${t} entries.`,excessName:e=>`El campo "${e}"no se proporciona, ¿es posiblemente un error tipográfico?`,expectedDictionaryGotDictionaries:e=>`En lugar de la única colección esperada "${e}"se encontraron varias colecciones con este nombre.`,expectedDictionaryGotField:e=>`En lugar de la colección esperada "${e}", se encontró un campo con este nombre.`,expectedDictionaryGotList:e=>`En lugar de la colección esperada "${e}", se encontró una lista con este nombre.`,expectedDictionaryGotSection:e=>`En lugar de la colección esperada "${e}", se encontró una sección con este nombre.`,expectedFieldGotDictionary:e=>`En lugar del campo esperado "${e}", se encontró una colección con este nombre.`,expectedFieldGotList:e=>`En lugar del campo esperado "${e}", se encontró una lista con el mismo nombre.`,expectedFieldGotMultipleFields:e=>`En lugar del único campo esperado "${e}"se encontraron varios campos con este nombre.`,expectedFieldGotSection:e=>`En lugar del campo esperado "${e}", se encontró una sección con este nombre.`,expectedListGotDictionary:e=>` "${e}"debe ser una colección de valores, pero incluye una colección.`,expectedListGotSection:e=>` "${e}"debe ser una colección de valores, pero incluye una sección.`,expectedSectionGotDictionary:e=>`Con el nombre "${e}"se encontró un diccionario, pero hay una sección proporcionada.`,expectedSectionGotEmpty:e=>`En lugar de la sección esperada "${e}", se encontró un campo vacío.`,expectedSectionGotField:e=>`En lugar de la sección esperada "${e}"se encontró un campo.`,expectedSectionGotList:e=>`El campo "${e}"contiene una lista, pero debe contener una sección.`,expectedSectionGotSections:e=>`En lugar de la única sección esperada "${e}"se encontraron varias secciones.`,expectedSectionsGotDictionary:e=>`Solo se esperaban secciones con el nombre "${e}", pero se encontró una colección.`,expectedSectionsGotEmpty:e=>`En lugar de las secciones esperadas con el nombre "${e}", se encontró un campo vacío.`,expectedSectionsGotField:e=>`En lugar de las secciones esperadas llamadas "${e}", se encontró un campo con este nombre.`,expectedSectionsGotList:e=>`Se esperaban las secciones denominadas "${e}", pero se encontró una lista.`,genericError:e=>`Hay un problema con el campo "${e}".`,maxCountNotMet:(e,n,t)=>`El campo "${e}"contiene ${n} entradas, pero solo puede contener un máximo de ${t} entradas.`,minCountNotMet:(e,n,t)=>`El campo "${e}"contiene ${n} entradas, pero debe contener al menos ${t} entries.`,missingDictionary:e=>`La colección "${e}"- si se ha especificado - puede faltar para los errores tipográficos y también distingue entre mayúsculas y minúsculas.`,missingDictionaryEntry:e=>`La entrada "${e}"- si se ha especificado - puede faltar para los errores tipográficos y también distingue entre mayúsculas y minúsculas .`,missingField:e=>`Falta el campo "${e}".`,missingList:e=>`Falta la lista "${e}"- Si se proporcionó el campo, es posible que esté buscando errores ortográficos y también distingue entre mayúsculas y minúsculas.`,missingSection:e=>`Falta la sección  "${e}".`}}}]);